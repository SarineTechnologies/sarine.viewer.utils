!function($){$.reject=function(options){var opts=$.extend(!0,{reject:{all:!1,msie:6},display:[],browserShow:!0,browserInfo:{chrome:{text:"Google Chrome",url:"http://www.google.com/chrome/"},firefox:{text:"Mozilla Firefox",url:"http://www.mozilla.com/firefox/"},safari:{text:"Safari",url:"http://www.apple.com/safari/download/"},opera:{text:"Opera",url:"http://www.opera.com/download/"},msie:{text:"Internet Explorer",url:"http://www.microsoft.com/windows/Internet-explorer/"}},header:"Did you know that your Internet Browser is out of date?",paragraph1:"Your browser is out of date, and may not be compatible with our website. A list of the most popular web browsers can be found below.",paragraph2:"Just click on the icons to get to the download page",close:!0,closeMessage:"By closing this window you acknowledge that your experience on this website may be degraded",closeLink:"Close This Window",closeURL:"#",closeESC:!0,closeCookie:!1,cookieSettings:{path:"/",expires:0},imagePath:"./images/",overlayBgColor:"#000",overlayOpacity:.8,fadeInTime:"fast",fadeOutTime:"fast",analytics:!1},options);opts.display.length<1&&(opts.display=["chrome","firefox","safari","opera","msie"]),$.isFunction(opts.beforeReject)&&opts.beforeReject(),opts.close||(opts.closeESC=!1);var browserCheck=function(settings){var layout=settings[$.layout.name],browser=settings[$.browser.name];return!!(settings.all||browser&&(browser===!0||$.browser.versionNumber<=browser)||settings[$.browser.className]||layout&&(layout===!0||$.layout.versionNumber<=layout)||settings[$.os.name])};if(!browserCheck(opts.reject))return $.isFunction(opts.onFail)&&opts.onFail(),!1;if(opts.close&&opts.closeCookie){var COOKIE_NAME="jreject-close",_cookie=function(name,value){if("undefined"!=typeof value){var expires="";if(0!==opts.cookieSettings.expires){var date=new Date;date.setTime(date.getTime()+1e3*opts.cookieSettings.expires),expires="; expires="+date.toGMTString()}var path=opts.cookieSettings.path||"/";return document.cookie=name+"="+encodeURIComponent(value?value:"")+expires+"; path="+path,!0}var cookie,val=null;if(document.cookie&&""!==document.cookie)for(var cookies=document.cookie.split(";"),clen=cookies.length,i=0;clen>i;++i)if(cookie=$.trim(cookies[i]),cookie.substring(0,name.length+1)==name+"="){var len=name.length;val=decodeURIComponent(cookie.substring(len+1));break}return val};if(_cookie(COOKIE_NAME))return!1}var html='<div id="jr_overlay"></div><div id="jr_wrap"><div id="jr_inner"><h1 id="jr_header">'+opts.header+"</h1>"+(""===opts.paragraph1?"":"<p>"+opts.paragraph1+"</p>")+(""===opts.paragraph2?"":"<p>"+opts.paragraph2+"</p>"),displayNum=0;if(opts.browserShow){html+="<ul>";for(var x in opts.display){var browser=opts.display[x],info=opts.browserInfo[browser]||!1;if(info&&(void 0==info.allow||browserCheck(info.allow))){var url=info.url||"#";html+='<li id="jr_'+browser+'"><div class="jr_icon"></div><div><a href="'+url+'">'+(info.text||"Unknown")+"</a></div></li>",++displayNum}}html+="</ul>"}html+='<div id="jr_close">'+(opts.close?'<a href="'+opts.closeURL+'">'+opts.closeLink+"</a><p>"+opts.closeMessage+"</p>":"")+"</div></div></div>";var element=$("<div>"+html+"</div>"),size=_pageSize(),scroll=_scrollSize();element.bind("closejr",function(){if(!opts.close)return!1;$.isFunction(opts.beforeClose)&&opts.beforeClose(),$(this).unbind("closejr"),$("#jr_overlay,#jr_wrap").fadeOut(opts.fadeOutTime,function(){$(this).remove(),$.isFunction(opts.afterClose)&&opts.afterClose()});var elmhide="embed.jr_hidden, object.jr_hidden, select.jr_hidden, applet.jr_hidden";return $(elmhide).show().removeClass("jr_hidden"),opts.closeCookie&&_cookie(COOKIE_NAME,"true"),!0});var analytics=function(url){if(!opts.analytics)return!1;var host=url.split(/\/+/g)[1];try{ga("send","event","External","Click",host,url)}catch(e){try{_gaq.push(["_trackEvent","External Links",host,url])}catch(e){}}},openBrowserLinks=function(url){return analytics(url),window.open(url,"jr_"+Math.round(11*Math.random())),!1};return element.find("#jr_overlay").css({width:size[0],height:size[1],background:opts.overlayBgColor,opacity:opts.overlayOpacity}),element.find("#jr_wrap").css({top:scroll[1]+size[3]/4,left:scroll[0]}),element.find("#jr_inner").css({minWidth:100*displayNum,maxWidth:140*displayNum,width:"trident"==$.layout.name?155*displayNum:"auto"}),element.find("#jr_inner li").css({background:'transparent url("'+opts.imagePath+'background_browser.gif") no-repeat scroll left top'}),element.find("#jr_inner li .jr_icon").each(function(){var self=$(this);self.css("background","transparent url("+opts.imagePath+"browser_"+self.parent("li").attr("id").replace(/jr_/,"")+".gif) no-repeat scroll left top"),self.click(function(){var url=$(this).next("div").children("a").attr("href");openBrowserLinks(url)})}),element.find("#jr_inner li a").click(function(){return openBrowserLinks($(this).attr("href")),!1}),element.find("#jr_close a").click(function(){return $(this).trigger("closejr"),"#"===opts.closeURL?!1:void 0}),$("#jr_overlay").focus(),$("embed, object, select, applet").each(function(){$(this).is(":visible")&&$(this).hide().addClass("jr_hidden")}),$("body").append(element.hide().fadeIn(opts.fadeInTime)),$(window).bind("resize scroll",function(){var size=_pageSize();$("#jr_overlay").css({width:size[0],height:size[1]});var scroll=_scrollSize();$("#jr_wrap").css({top:scroll[1]+size[3]/4,left:scroll[0]})}),opts.closeESC&&$(document).bind("keydown",function(event){27==event.keyCode&&element.trigger("closejr")}),$.isFunction(opts.afterReject)&&opts.afterReject(),!0};var _pageSize=function(){var xScroll=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth,yScroll=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight,windowWidth=window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth,windowHeight=window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;return[windowWidth>xScroll?xScroll:windowWidth,windowHeight>yScroll?windowHeight:yScroll,windowWidth,windowHeight]},_scrollSize=function(){return[window.pageXOffset?window.pageXOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollLeft:document.body.scrollLeft,window.pageYOffset?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop]}}(jQuery),function($){$.browserTest=function(a,z){var u="unknown",x="X",m=function(r,h){for(var i=0;i<h.length;i+=1)r=r.replace(h[i][0],h[i][1]);return r},c=function(i,a,b,c){var r={name:m((a.exec(i)||[u,u])[1],b)};if(r[r.name]=!0,r.version=r.opera?window.opera.version():(c.exec(i)||[x,x,x,x])[3],/safari/.test(r.name)){var safariversion=/(safari)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/,res=safariversion.exec(i);res&&res[3]&&res[3]<400&&(r.version="2.0")}else"presto"===r.name&&(r.version=$.browser.version>9.27?"futhark":"linear_b");if(/msie/.test(r.name)&&r.version===x){var ieVersion=/rv:(\d+\.\d+)/.exec(i);r.version=ieVersion[1]}r.versionNumber=parseFloat(r.version,10)||0;var minorStart=1;return r.versionNumber<100&&r.versionNumber>9&&(minorStart=2),r.versionX=r.version!==x?r.version.substr(0,minorStart):x,r.className=r.name+r.versionX,r};a=(/Opera|Navigator|Minefield|KHTML|Chrome|CriOS/.test(a)?m(a,[[/(Firefox|MSIE|KHTML,\slike\sGecko|Konqueror)/,""],["Chrome Safari","Chrome"],["CriOS","Chrome"],["KHTML","Konqueror"],["Minefield","Firefox"],["Navigator","Netscape"]]):a).toLowerCase(),$.browser=$.extend(z?{}:$.browser,c(a,/(camino|chrome|crios|firefox|netscape|konqueror|lynx|msie|trident|opera|safari)/,[["trident","msie"]],/(camino|chrome|crios|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|rv|safari)(:|\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/)),$.layout=c(a,/(gecko|konqueror|msie|trident|opera|webkit)/,[["konqueror","khtml"],["msie","trident"],["opera","presto"]],/(applewebkit|rv|konqueror|msie)(\:|\/|\s)([a-z0-9\.]*?)(\;|\)|\s)/),$.os={name:(/(win|mac|linux|sunos|solaris|iphone|ipad)/.exec(navigator.platform.toLowerCase())||[u])[0].replace("sunos","solaris")},z||$("html").addClass([$.os.name,$.browser.name,$.browser.className,$.layout.name,$.layout.className].join(" "))},$.browserTest(navigator.userAgent)}(jQuery),$(function(){return $.reject({reject:{msie:10,firefox:34,chrome:39,safari:7},close:!1,header:"Your browser version is out of date",display:["chrome","safari","firefox","msie"],imagePath:"http://d3oayecwxm3wp6.cloudfront.net/qa2/content/viewers/shell/v1/images/"}),!1}),(void 0==window.performance||void 0==window.performance.now)&&(window.performance={},window.performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}()),void 0==window.performance.mark&&(window.performance._marks=[],window.performance.mark=function(mark_name,duration){duration=duration||0,window.performance._marks.push({mark:mark_name,startTime:window.performance.now()-document.initTime,duration:duration})},window.performance.getEntriesByName=function(name){return window.performance._marks.filter(function(mark){return mark.mark==name})},window.performance.clearMarks=function(){},window.performance.clearMeasures=function(){},window.performance.measure=function(new_mark,start_mark_name,end_mark_name){var start_mark=window.performance.getEntriesByName(start_mark_name)[0],end_mark=window.performance.getEntriesByName(end_mark_name)[0];"undefined"!=typeof start_mark&&"undefined"!=typeof end_mark?window.performance.mark(new_mark,end_mark.startTime-start_mark.startTime):window.performance.mark(new_mark,(new Date).getTime()-(new Date).getTime())}),document.initTime=performance.now(),window.performance.mark("mark_start");var performanceManager=function(isDebugMode){function calcAndWriteToLog(id){$("#"+id+">.value").html(performanceManager.FormatTime(calcTime(id)))}function measure(id){window.performance.measure(id)}function mark(eventName){window.performance.measure(eventName)}function calcTime(eventName){var measure=window.performance.getEntriesByName(eventName)[0];return"undefined"!=typeof measure?measure.duration+measure.startTime:"N/A"}function init(viewersArr){var ul=document.createElement("ul");ul.id="debug_log",ul.style.position="absolute",ul.style.bottom="0",ul.style.background="#ccc";for(var i=0;i<viewersArr.length;i++){var li=document.createElement("li"),span=document.createElement("span");span.innerText="loading...",span.className="value",li.id=viewersArr[i].id+"_"+viewersArr[i].element.data("type")+"_first_init",li.innerHTML=viewersArr[i].id+"_"+viewersArr[i].element.data("type")+"_first_init : "+span.outerHTML,ul.appendChild(li);var li2=document.createElement("li"),span=document.createElement("span");span.innerText="loading...",span.className="value",li2.id=viewersArr[i].id+"_"+viewersArr[i].element.data("type")+"_full_init",li2.innerHTML=viewersArr[i].id+"_"+viewersArr[i].element.data("type")+"_full_init : "+span.outerHTML,ul.appendChild(li2)}document.body.appendChild(ul),isDebugMode?$("#debug_log").show():$("#debug_log").hide()}return{Measure:measure,Mark:mark,CalcAndWriteToLog:calcAndWriteToLog,Init:init}}(1==location.hash.indexOf("debug"));$(document).on("loadTemplate",function(){performanceManager.Init(vm.getViewers())}),$(document).on("first_init_start",function(event,data){performanceManager.Measure(data.Id+"_first_init"),performanceManager.Mark(data.Id+"_first_init_start")}),$(document).on("first_init_end",function(event,data){performanceManager.Mark(data.Id+"_first_init_end"),performanceManager.CalcAndWriteToLog(data.Id+"_first_init")}),$(document).on("full_init_start",function(event,data){performanceManager.Measure(data.Id+"_full_init"),performanceManager.Mark(data.Id+"_full_init_start")}),$(document).on("full_init_end",function(event,data){performanceManager.Mark(data.Id+"_full_init_end"),performanceManager.CalcAndWriteToLog(data.Id+"_full_init")});